apply from: "$rootDir/gradle/instrumentation.gradle"

dependencies {
  compileOnly project(':instrumentation-core:spring:spring-webmvc-3.1-core')

  testImplementation(project(':testing')) {
    exclude(module: 'jetty-server') // incompatable servlet api
  }

  // Include servlet instrumentation for verifying the tomcat requests
  testImplementation project(':instrumentation:servlet')
  testImplementation project(':instrumentation:servlet:servlet-3.0')

  testImplementation group: 'javax.validation', name: 'validation-api', version: '1.1.0.Final'
  testImplementation group: 'org.hibernate', name: 'hibernate-validator', version: '5.4.2.Final'

  testImplementation group: 'org.spockframework', name: 'spock-spring', version: "$versions.spock"

  testImplementation group: 'org.springframework.boot', name: 'spring-boot-starter-test', version: '1.5.17.RELEASE'
  testImplementation group: 'org.springframework.boot', name: 'spring-boot-starter-web', version: '1.5.17.RELEASE'
  testImplementation group: 'org.springframework.boot', name: 'spring-boot-starter-security', version: '1.5.17.RELEASE'
  testImplementation group: 'org.springframework.security.oauth', name: 'spring-security-oauth2', version: '2.0.16.RELEASE'

  // For spring security
  testImplementation "jakarta.xml.bind:jakarta.xml.bind-api:2.3.2"
  testImplementation "org.glassfish.jaxb:jaxb-runtime:2.3.2"
}
